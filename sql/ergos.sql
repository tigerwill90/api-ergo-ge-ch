-- MySQL Script generated by MySQL Workbench
-- Tue Feb 26 14:34:26 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema ergos
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `ergos` ;

-- -----------------------------------------------------
-- Schema ergos
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ergos` DEFAULT CHARACTER SET utf8 ;
USE `ergos` ;

-- -----------------------------------------------------
-- Table `ergos`.`offices`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ergos`.`offices` ;

CREATE TABLE IF NOT EXISTS `ergos`.`offices` (
  `offices_id` INT NOT NULL AUTO_INCREMENT,
  `offices_address` VARCHAR(80) NOT NULL,
  `offices_npa` VARCHAR(10) NOT NULL,
  `offices_city` VARCHAR(45) NOT NULL,
  `offices_cp` VARCHAR(10) NULL,
  `offices_name` VARCHAR(45) NOT NULL,
  `offices_phone` VARCHAR(45) NULL,
  `offices_fax` VARCHAR(45) NULL,
  `offices_email` VARCHAR(250) NOT NULL,
  `offices_district` VARCHAR(45) NULL,
  PRIMARY KEY (`offices_id`),
  UNIQUE INDEX `offices_phone_UNIQUE` (`offices_phone` ASC),
  UNIQUE INDEX `offices_fax_UNIQUE` (`offices_fax` ASC),
  UNIQUE INDEX `offices_email_UNIQUE` (`offices_email` ASC),
  UNIQUE INDEX `offices_name_UNIQUE` (`offices_name` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ergos`.`therapists`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ergos`.`therapists` ;

CREATE TABLE IF NOT EXISTS `ergos`.`therapists` (
  `therapists_id` INT NOT NULL AUTO_INCREMENT,
  `therapists_title` VARCHAR(10) NOT NULL,
  `therapists_firstname` VARCHAR(80) NOT NULL,
  `therapists_lastname` VARCHAR(80) NOT NULL,
  `therapists_home` TINYINT NOT NULL,
  `therapists_offices_id` INT NOT NULL,
  PRIMARY KEY (`therapists_id`, `therapists_offices_id`),
  INDEX `fk_therapists_offices1_idx` (`therapists_offices_id` ASC),
  CONSTRAINT `fk_therapists_offices1`
    FOREIGN KEY (`therapists_offices_id`)
    REFERENCES `ergos`.`offices` (`offices_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ergos`.`phones`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ergos`.`phones` ;

CREATE TABLE IF NOT EXISTS `ergos`.`phones` (
  `phones_id` INT NOT NULL AUTO_INCREMENT,
  `phones_type` VARCHAR(25) NOT NULL,
  `phones_number` VARCHAR(45) NOT NULL,
  `phones_therapists_id` INT NOT NULL,
  PRIMARY KEY (`phones_id`, `phones_therapists_id`),
  INDEX `fk_phones_therapist_idx` (`phones_therapists_id` ASC),
  UNIQUE INDEX `phones_number_UNIQUE` (`phones_number` ASC),
  CONSTRAINT `fk_phones_therapist`
    FOREIGN KEY (`phones_therapists_id`)
    REFERENCES `ergos`.`therapists` (`therapists_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ergos`.`emails`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ergos`.`emails` ;

CREATE TABLE IF NOT EXISTS `ergos`.`emails` (
  `emails_id` INT NOT NULL AUTO_INCREMENT,
  `emails_address` VARCHAR(250) NOT NULL,
  `emails_therapists_id` INT NOT NULL,
  PRIMARY KEY (`emails_id`, `emails_therapists_id`),
  UNIQUE INDEX `email_adress_UNIQUE` (`emails_address` ASC),
  INDEX `fk_emails_therapists1_idx` (`emails_therapists_id` ASC),
  CONSTRAINT `fk_emails_therapists1`
    FOREIGN KEY (`emails_therapists_id`)
    REFERENCES `ergos`.`therapists` (`therapists_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ergos`.`categories`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ergos`.`categories` ;

CREATE TABLE IF NOT EXISTS `ergos`.`categories` (
  `categories_id` INT NOT NULL AUTO_INCREMENT,
  `categories_name` VARCHAR(45) NOT NULL,
  `categories_description` VARCHAR(255) NULL,
  PRIMARY KEY (`categories_id`),
  UNIQUE INDEX `categories_name_UNIQUE` (`categories_name` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ergos`.`therapistsCategories`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ergos`.`therapistsCategories` ;

CREATE TABLE IF NOT EXISTS `ergos`.`therapistsCategories` (
  `therapistsCategories_therapists_id` INT NOT NULL,
  `therapistsCategories_categories_id` INT NOT NULL,
  PRIMARY KEY (`therapistsCategories_therapists_id`, `therapistsCategories_categories_id`),
  INDEX `fk_therapists_has_categories_categories1_idx` (`therapistsCategories_categories_id` ASC),
  CONSTRAINT `fk_therapists_has_categories_therapists1`
    FOREIGN KEY (`therapistsCategories_therapists_id`)
    REFERENCES `ergos`.`therapists` (`therapists_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_therapists_has_categories_categories1`
    FOREIGN KEY (`therapistsCategories_categories_id`)
    REFERENCES `ergos`.`categories` (`categories_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `ergos`.`offices`
-- -----------------------------------------------------
START TRANSACTION;
USE `ergos`;
INSERT INTO `ergos`.`offices` (`offices_id`, `offices_address`, `offices_npa`, `offices_city`, `offices_cp`, `offices_name`, `offices_phone`, `offices_fax`, `offices_email`, `offices_district`) VALUES (1, 'Avenue des Morgines 39', '1213', 'Genève', NULL, 'A 2 mains', '0227937300', NULL, 'a2main@gmail.com', 'Genève');
INSERT INTO `ergos`.`offices` (`offices_id`, `offices_address`, `offices_npa`, `offices_city`, `offices_cp`, `offices_name`, `offices_phone`, `offices_fax`, `offices_email`, `offices_district`) VALUES (2, 'Bois de la Chappelle 105', '1213', 'Onex', '68', 'Chez Christine', '0227895465', '0223456878', 'chezchrichri@via.com', 'Genève');

COMMIT;


-- -----------------------------------------------------
-- Data for table `ergos`.`therapists`
-- -----------------------------------------------------
START TRANSACTION;
USE `ergos`;
INSERT INTO `ergos`.`therapists` (`therapists_id`, `therapists_title`, `therapists_firstname`, `therapists_lastname`, `therapists_home`, `therapists_offices_id`) VALUES (1, 'Mme', 'Catherine', 'DEPALLENS', 1, 1);
INSERT INTO `ergos`.`therapists` (`therapists_id`, `therapists_title`, `therapists_firstname`, `therapists_lastname`, `therapists_home`, `therapists_offices_id`) VALUES (2, 'Mme', 'Corinne', 'MASSON FRIEDLI', 1, 1);
INSERT INTO `ergos`.`therapists` (`therapists_id`, `therapists_title`, `therapists_firstname`, `therapists_lastname`, `therapists_home`, `therapists_offices_id`) VALUES (3, 'M', 'Ivo', 'CANONICA', 0, 1);
INSERT INTO `ergos`.`therapists` (`therapists_id`, `therapists_title`, `therapists_firstname`, `therapists_lastname`, `therapists_home`, `therapists_offices_id`) VALUES (4, 'Mme', 'Christelle', 'ABRIEL', 1, 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `ergos`.`phones`
-- -----------------------------------------------------
START TRANSACTION;
USE `ergos`;
INSERT INTO `ergos`.`phones` (`phones_id`, `phones_type`, `phones_number`, `phones_therapists_id`) VALUES (1, 'tel', '0796522831', 1);
INSERT INTO `ergos`.`phones` (`phones_id`, `phones_type`, `phones_number`, `phones_therapists_id`) VALUES (2, 'tel/fax', '0227928968', 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `ergos`.`emails`
-- -----------------------------------------------------
START TRANSACTION;
USE `ergos`;
INSERT INTO `ergos`.`emails` (`emails_id`, `emails_address`, `emails_therapists_id`) VALUES (1, 'bob@kkk.com', 1);
INSERT INTO `ergos`.`emails` (`emails_id`, `emails_address`, `emails_therapists_id`) VALUES (2, 'afsdaf@asf.ch', 1);
INSERT INTO `ergos`.`emails` (`emails_id`, `emails_address`, `emails_therapists_id`) VALUES (3, 'yc@rrr.ch', 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `ergos`.`categories`
-- -----------------------------------------------------
START TRANSACTION;
USE `ergos`;
INSERT INTO `ergos`.`categories` (`categories_id`, `categories_name`, `categories_description`) VALUES (1, 'Pédiatrie', '');
INSERT INTO `ergos`.`categories` (`categories_id`, `categories_name`, `categories_description`) VALUES (2, 'Gériatrie', NULL);
INSERT INTO `ergos`.`categories` (`categories_id`, `categories_name`, `categories_description`) VALUES (3, 'Pathologie membre supérieur', NULL);
INSERT INTO `ergos`.`categories` (`categories_id`, `categories_name`, `categories_description`) VALUES (4, 'Médecine physique', NULL);
INSERT INTO `ergos`.`categories` (`categories_id`, `categories_name`, `categories_description`) VALUES (5, 'Psychiatrie', NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `ergos`.`therapistsCategories`
-- -----------------------------------------------------
START TRANSACTION;
USE `ergos`;
INSERT INTO `ergos`.`therapistsCategories` (`therapistsCategories_therapists_id`, `therapistsCategories_categories_id`) VALUES (1, 1);
INSERT INTO `ergos`.`therapistsCategories` (`therapistsCategories_therapists_id`, `therapistsCategories_categories_id`) VALUES (1, 2);
INSERT INTO `ergos`.`therapistsCategories` (`therapistsCategories_therapists_id`, `therapistsCategories_categories_id`) VALUES (1, 3);
INSERT INTO `ergos`.`therapistsCategories` (`therapistsCategories_therapists_id`, `therapistsCategories_categories_id`) VALUES (2, 4);
INSERT INTO `ergos`.`therapistsCategories` (`therapistsCategories_therapists_id`, `therapistsCategories_categories_id`) VALUES (2, 2);
INSERT INTO `ergos`.`therapistsCategories` (`therapistsCategories_therapists_id`, `therapistsCategories_categories_id`) VALUES (3, 5);
INSERT INTO `ergos`.`therapistsCategories` (`therapistsCategories_therapists_id`, `therapistsCategories_categories_id`) VALUES (3, 1);
INSERT INTO `ergos`.`therapistsCategories` (`therapistsCategories_therapists_id`, `therapistsCategories_categories_id`) VALUES (4, 2);
INSERT INTO `ergos`.`therapistsCategories` (`therapistsCategories_therapists_id`, `therapistsCategories_categories_id`) VALUES (4, 5);

COMMIT;

